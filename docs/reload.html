<!DOCTYPE html>  <html> <head>   <title>reload.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               reload.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <pre><code>Reload.js 0.1b
(c) 2011 Christopher Woodall, Happy Robot Labs.
Reload is freely distributable under the MIT license.
For all details and documentation:
http://github.com/cwoodall/reload-js
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Reload tries to do as little as possible for you. It is a loader, not a 
versioning system or repository. You are the one responsible for versioning
and setting up your file system. The more work that is already done the
faster Reload can work, as such I only included a few features for efficiency.</p>

<p>As a general rule of thumb you will want to structure your library directory in 
a logical and well defined manner. Most plugins do not follow the same standards,
as such I don't rely on them. It is up to the maintainer to setup standards.</p>

<p>Support for versioning might be included in a future version of Reload.js</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h1>Baseline Setup</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Define the head to speed up future queries for the head object.</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">head</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
  </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <h1>Reload it!</h1>             </td>             <td class="code">               <div class="highlight"><pre>	</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Define base Reload object, everything will be added to this.</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">Reload</span> <span class="o">=</span> <span class="k">new</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">VERSION</span> <span class="o">=</span> <span class="s2">&quot;0.1b&quot;</span><span class="p">;</span>
		</pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>OPTIONAL: Defines where your library folder is. Leave blank if none is desired.
If a library starts with http:// the lib_location will NOT be applied.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">this</span><span class="p">.</span><span class="nx">lib_location</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
	</pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>OPTIONAL: Defines an array of lib strings. Load these libraries using Reload.load()</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">this</span><span class="p">.</span><span class="nx">libs</span> <span class="o">=</span> <span class="p">[];</span>
	</pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Reload.require(lib, callback) is the base function for loading libraries.
This function checks for lib_location, and analyzes the lib string then loads 
the libstring and runs the callback function.</p>

<p>TODO: Support for IE6-8</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">this</span><span class="p">.</span><span class="nx">require</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">lib</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Check that lib_location is not a null string and check that the lib string is
not an http:// call using a reg exp test.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">lib_location</span> <span class="o">!==</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">((</span><span class="sr">/http:\/\/.*/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">lib</span><span class="p">)))</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>If there is no .js we will add it for you... Because we are nice.</p>

<p>Allows function calls that look like this:</p>

<pre><code> Reload.require('jquery.min', function () {
     $('body').append('Test Success');
 });
</code></pre>

<p>Or with intelligent folder and file naming:  </p>

<pre><code> Reload.requires(['jquery', 'jquery/some_plugin'], function () {
     $('body').append('Test Success');
 });
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">((</span><span class="sr">/.+\.js$/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">lib</span><span class="p">)))</span> <span class="p">{</span>
					<span class="nx">lib</span> <span class="o">+=</span> <span class="s2">&quot;.js&quot;</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="nx">lib</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">lib_location</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">lib</span><span class="p">;</span>
			<span class="p">}</span> 

			<span class="kd">var</span> <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
			<span class="nx">script</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;text/javascript&quot;</span><span class="p">;</span>
			<span class="nx">script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">lib</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>If the callback function exists define it as the onload function</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">callback</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">){</span>
				<span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">;</span>
			<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Append the script into the header</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
		<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Require multiple libraries using and array</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">this</span><span class="p">.</span><span class="nx">requires</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">lib_array</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Why would there be 0 or fewer libraries? You are crazy</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="k">if</span> <span class="p">(</span><span class="nx">lib_array</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">throw</span> <span class="s2">&quot;Insufficient Arguments, No Libraries Required&quot;</span><span class="p">;</span>
			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">lib_array</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>When there is one library left we just call require and call the callback</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="k">this</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="nx">lib_array</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">callback</span><span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>get rid of the first element of lib<em>array and store it in current</em>lib</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="nx">current_lib</span> <span class="o">=</span> <span class="nx">lib_array</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Recursively add the libraries starting with the first one (most important)
and then moving down to the last one.</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="nx">Reload</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="nx">current_lib</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Pass along the callback function for future use.</p>             </td>             <td class="code">               <div class="highlight"><pre>					<span class="nx">Reload</span><span class="p">.</span><span class="nx">requires</span><span class="p">(</span><span class="nx">lib_array</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
				<span class="p">});</span>
			<span class="p">}</span>
		<span class="p">};</span>
	</pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Load up all of the libraries stored in Reload.libs
and then callback.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">this</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">requires</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">libs</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
		<span class="p">};</span>
	<span class="p">};</span>
<span class="p">})();</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 